<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dashboard Karyawan â€” Mulya Team</title>
<style>
#login-screen{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at top,#111,#000);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.login-box{
  width:340px;
  padding:28px;
  background:rgba(10,10,10,.85);
  border-radius:16px;
  text-align:center;
  border:2px solid transparent;
  animation:lightning 1.5s infinite;
  box-shadow:0 0 40px rgba(255,0,0,.15);
}

@keyframes lightning{
  0%{border-color:#ffb703}
  50%{border-color:#ff0033}
  100%{border-color:#ffb703}
}

.login-box h2{
  margin:0;
  font-size:22px;
  color:#ffcc00;
  letter-spacing:1px;
}

.login-box p{
  margin:6px 0 18px;
  font-size:13px;
  color:#aaa;
}

.login-box input{
  width:100%;
  padding:10px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #333;
  background:#000;
  color:#fff;
  font-size:14px;
}

.login-box button{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:800;
  background:linear-gradient(135deg,#ffcc00,#ff9900);
  color:#000;
}

#loginError{
  display:none;
  margin-top:10px;
  color:#ff4d4f;
  font-size:12px;
}

:root{
  --bg:#071022;
  --panel: rgba(255,255,255,0.04);
  --muted:#9aa6b2;
  --accent:#ffcc00;
  --glassBorder: rgba(255,255,255,0.06);
  --blue: #1e90ff;
  --purple: #a78bfa;
  --fire1: #ff7a45;
  --fire2: #ff4d4f;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, system-ui, Arial, sans-serif;
  background: linear-gradient(180deg,#071022 0%, #04101a 100%);
  color:#e6eef6;
  padding:28px;
}
.wrap{ max-width:1200px; margin:0 auto; }

header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px; }
h1{ font-size:20px; margin:0; }
.controls{ display:flex; gap:8px; flex-wrap:wrap; }
.btn{ border:0; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:700; font-size:13px; }
.btn-primary{ background: var(--blue); color:white; }
.btn-warning{ background: var(--accent); color:#061018; }
.btn-danger{ background: var(--fire2); color:white; }
.status{ margin-top:8px; color:var(--muted); font-size:13px; }

/* GRID */
.grid{ display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:16px; margin-top:18px; }

.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid var(--glassBorder);
  padding:14px; border-radius:12px;
  min-height:220px;
  display:flex; flex-direction:column; gap:10px;
}

/* PHOTO */
.photo-container{ display:flex; align-items:flex-start; gap:12px; justify-content:flex-start; }
.photo{
  width:130px; height:130px; border-radius:50%; object-fit:cover; flex:0 0 130px;
  background: linear-gradient(135deg,#0b1220,#162134); border:3px solid rgba(255,255,255,0.04);
}

/* ACV column (horizontal layout: two charts side by side) */
.acv-group{ display:flex; gap:10px; align-items:center; margin-left:auto; }
.acv-item{ display:flex; flex-direction:column; align-items:center; gap:6px; }

.acv-label{ font-size:11px; font-weight:800; letter-spacing:0.6px; text-transform:uppercase; }
.acv-label.m{ color:var(--blue); }
.acv-label.d{ color:var(--purple); }

.acv-chart{ width:58px; height:58px; position:relative; }
.acv-chart svg{ transform: rotate(-90deg); }
.acv-center{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:11px; }

/* NAME / FEE / RANK */
.name{ font-size:15px; font-weight:800; color:#eef6ff; }
.fee{ font-size:13px; color:var(--muted); }
.rank{ margin-top:6px; padding:6px 10px; border-radius:999px; background:var(--accent); color:#061018; font-weight:800; display:inline-block; }

/* STATS */
.stats{ display:flex; gap:8px; justify-content:space-between; margin-top:10px; font-size:13px; color:#dfe9f5; }
.stat{ flex:1; text-align:center; }
.stat b{ display:block; font-size:14px; color:#fff; }

/* FOOTER ACTIONS */
.footer-actions{ display:flex; gap:8px; margin-top:12px; }
.upload-btn, .remove-btn{ flex:1; padding:8px; border-radius:8px; border:0; cursor:pointer; font-weight:700; font-size:13px; }
.upload-btn{ background:#1f2937; color:#fff; }
.remove-btn{ background:var(--fire2); color:#fff; }

/* CASE BOARD */
.case-board { margin-top:26px; padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid var(--glassBorder); }
.case-title{ font-size:18px; margin-bottom:12px; color:#eef6ff; }
.case-table{ width:100%; border-collapse:collapse; color:#eaf1fb; font-size:14px; }
.case-table thead th{ text-align:left; padding:10px 12px; font-weight:700; color:#dfe9f5; border-bottom:1px solid rgba(255,255,255,0.03); }
.case-table tbody td{ padding:12px; border-bottom:1px dashed rgba(255,255,255,0.03); vertical-align:middle; }
.case-photo{ width:44px; height:44px; border-radius:8px; object-fit:cover; display:flex; align-items:center; justify-content:center; background:#122233; color:#fff; font-weight:700; }

/* CASE CIRCLE */
.case-circle{ width:52px; height:52px; position:relative; display:inline-block; }
.case-circle svg{ transform: rotate(-90deg); }
.case-circle .case-pct{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:12px; }

/* FIRE style */
.fire svg{ filter: drop-shadow(0 0 8px rgba(255,90,30,0.9)); }
.fire .flame { opacity:0.95; animation: flame 1s infinite alternate; }
@keyframes flame{ from{ transform: translateY(0); } to{ transform: translateY(-4px); } }

@media (max-width:880px){
  .card{ min-height:200px; }
  .photo{ width:110px; height:110px; flex:0 0 110px; }
  .acv-chart{ width:46px; height:46px; }
  .case-circle{ width:46px; height:46px; }
}
</style>
</head>
<body>
<div id="login-screen">
  <div class="login-box">
    <h2>Mulya Team</h2>
    <p>Dashboard KPI Internal (Khusus Member 10k/Bulan)</p>

    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">

    <button id="loginBtn">Masuk Dashboard</button>
    <div id="loginError">Username atau password salah</div>
  </div>
</div>

  <div class="wrap">
    <header>
      <div>
        <h1>ðŸ“‹ Dashboard KPI Karyawan (Mulya Team)</h1>
        <div id="status" class="status">Status: menunggu tindakan</div>
      </div>

      <div class="controls">
        <button id="btnReload" class="btn btn-primary">Muat Ulang dari Spreadsheet</button>
        <button id="btnUseCache" class="btn btn-warning">Gunakan Cache Lokal</button>
        <button id="btnClearCache" class="btn btn-danger">Hapus Cache Lokal</button>
      </div>
    </header>

    <section id="grid" class="grid" aria-live="polite"></section>

    <section class="case-board">
      <div class="case-title">ðŸ“Š Daftar Kasus (urut: terkecil â†’ terbesar)</div>
      <table class="case-table" role="table" aria-label="Daftar Kasus">
        <thead>
          <tr>
            <th style="width:64px">Rank</th>
            <th style="width:56px">Foto</th>
            <th>Nama Karyawan</th>
            <th style="width:90px">Kasus</th>
            <th style="width:110px;text-align:center">Diagram</th>
          </tr>
        </thead>
        <tbody id="case-body"></tbody>
      </table>
    </section>
  </div>

  <input type="file" id="globalFilePicker" accept="image/*" style="display:none;">

<script>
/* CONFIG */
const API_URL = "https://script.google.com/macros/s/AKfycbxs1kiIqdGW5T1tQQ0FRG8ErClfet4GPNlWlG-Yievkl5LtHuHoFq2P6UcJc-p9win3/exec";
const LS_API_KEY = "webData_api";
const LS_PHOTO_KEY = "webData_photos";

/* DOM refs */
const $ = sel => document.querySelector(sel);
const statusEl = $("#status");
const gridEl = $("#grid");
const caseBody = $("#case-body");
const globalFile = document.getElementById("globalFilePicker");

function setStatus(msg, color){ statusEl.textContent = "Status: " + msg; statusEl.style.color = color || ""; }

/* STORAGE helpers */
function readPhotos(){ try{ return JSON.parse(localStorage.getItem(LS_PHOTO_KEY)) || {}; }catch(e){ return {}; } }
function writePhotos(obj){ localStorage.setItem(LS_PHOTO_KEY, JSON.stringify(obj)); }

function readApiCache(){ try{ return JSON.parse(localStorage.getItem(LS_API_KEY)) || null; }catch(e){ return null; } }
function writeApiCache(arr){ localStorage.setItem(LS_API_KEY, JSON.stringify(arr)); }

/* safe numeric parsing */
function asNumber(x, fallback=0){
  if (x === null || x === undefined) return fallback;
  if (typeof x === "number") return x;
  const n = Number(String(x).replace(/,/g,"").replace(/[^0-9.\-]/g,""));
  return isNaN(n) ? fallback : n;
}

/* convert to percent-string for display (e.g. 0.43327 -> "43.33%") */
function percentDisplay(v){
  if (v === "#N/A" || v === null || v === undefined || v === "") return "-";
  const n = Number(v);
  if (isNaN(n)) return "-";
  return (n * 100).toFixed(2) + "%";
}

/* convert to numeric percent (e.g. 0.43327 -> 43.327) */
function percentNumber(v){
  if (v === "#N/A" || v === null || v === undefined || v === "") return NaN;
  const n = Number(v);
  return isNaN(n) ? NaN : n * 100;
}

/* escape */
function escapeHtml(str){ if (str == null) return ""; return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;"); }
function numberWithCommas(x){ if (x == null) return "0"; return String(x).replace(/\B(?=(\d{3})+(?!\d))/g, "."); }

/* build ring svg for ACV (percentNum may be >100) */
function buildAcvCircle(percentNum, colorVar, size=58){
  // percentNum is numeric percentage (e.g. 43.33). Could be NaN.
  const cap = isFinite(percentNum) ? Math.max(0, percentNum) : 0;
  const visual = Math.min(cap, 150); // cap visual at 150%
  const r = 24; // radius for viewbox 72
  const circ = 2 * Math.PI * r;
  const dash = (visual / 100) * circ;
  const innerText = isFinite(percentNum) ? (Math.round(percentNum) + "%") : "-";

  return `
    <div class="acv-chart" style="width:${size}px;height:${size}px;position:relative">
      <svg width="${size}" height="${size}" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
        <circle cx="36" cy="36" r="${r}" stroke="rgba(255,255,255,0.06)" stroke-width="6" fill="none"></circle>
        <circle cx="36" cy="36" r="${r}" stroke="${colorVar}" stroke-width="6" fill="none"
          stroke-dasharray="${circ}" stroke-dashoffset="${circ - dash}" stroke-linecap="round"></circle>
      </svg>
      <div class="acv-center" style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:11px">${innerText}</div>
    </div>
  `;
}

/* normalize row */
function normalizeApiRow(r){
  return {
    Nama: String(r.Nama ?? r.nama ?? ""),
    Masuk: asNumber(r.Masuk ?? r.masuk ?? 0),
    Sakit: asNumber(r.Sakit ?? r.sakit ?? 0),
    Izin: asNumber(r.Izin ?? r.izin ?? 0),
    Alpa: asNumber(r.Alpa ?? r.alpa ?? 0),
    Fee: asNumber(r.Fee ?? r.fee ?? 0),
    Rank: (()=>{
      const rr = r.Rank ?? r.rank ?? 999;
      const rn = Number(rr);
      return isNaN(rn) ? 999 : rn;
    })(),
    Kasus: asNumber(r.Kasus ?? r.kasus ?? ((r.Masuk||0)+(r.Sakit||0)+(r.Izin||0)+(r.Alpa||0))),
    Foto: r.Foto ?? r.foto ?? "",
    Acv_M_raw: r.Acv_M ?? r.acv_m ?? 0,
    Acv_D_raw: r.Acv_D ?? r.acv_d ?? 0,
    Acv_M: percentDisplay(r.Acv_M ?? r.acv_m ?? 0),
    Acv_D: percentDisplay(r.Acv_D ?? r.acv_d ?? 0),
    __raw: r
  };
}

/* merge with local photos & sort */
function mergeDataWithPhotos(arr){
  const photos = readPhotos();
  const normalized = arr.map(normalizeApiRow);
  normalized.forEach(it => { if (photos[it.Nama]) it.Foto = photos[it.Nama]; });
  normalized.sort((a,b)=> a.Rank - b.Rank);
  return normalized;
}

/* RENDER GRID */
function renderGrid(items){
  gridEl.innerHTML = "";
  if (!items || items.length === 0) {
    gridEl.innerHTML = `<div style="grid-column:1/-1;color:var(--muted);padding:18px;text-align:center">Tidak ada data. Klik "Muat Ulang dari Spreadsheet".</div>`;
    return;
  }

  items.forEach(it=>{
    // photo or initials
    const photoHTML = (it.Foto && (String(it.Foto).startsWith("data:") || String(it.Foto).startsWith("http")))
      ? `<img src="${escapeHtml(it.Foto)}" class="photo" alt="${escapeHtml(it.Nama)}">`
      : `<div class="photo" style="display:flex;align-items:center;justify-content:center;background:#dbeafe;color:#001;font-weight:800;font-size:34px">${escapeHtml(it.Nama.split(" ").map(s=>s[0]||"").slice(0,2).join("").toUpperCase())}</div>`;

    // ACV circles
    const acvMnum = percentNumber(it.Acv_M_raw); // numeric percent
    const acvDnum = percentNumber(it.Acv_D_raw);

    const acvMSvg = buildAcvCircle(acvMnum, "var(--blue)");
    const acvDSvg = buildAcvCircle(acvDnum, "var(--purple)");

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div class="photo-container">
        ${photoHTML}
        <div class="acv-group" aria-hidden="false">
          <div class="acv-item">
            <div class="acv-label m">ACV M</div>
            ${acvMSvg}
          </div>
          <div class="acv-item">
            <div class="acv-label d">ACV D</div>
            ${acvDSvg}
          </div>
        </div>
      </div>

      <div style="text-align:center">
        <div class="name">${escapeHtml(it.Nama)}</div>
        <div class="fee">Fee: Rp ${numberWithCommas(it.Fee)}</div>
        <div class="rank">Rank ${escapeHtml(it.Rank)}</div>
      </div>

      <div class="stats">
        <div class="stat"><b>${it.Masuk}</b><div class="small">Masuk</div></div>
        <div class="stat"><b>${it.Sakit}</b><div class="small">Sakit</div></div>
        <div class="stat"><b>${it.Izin}</b><div class="small">Izin</div></div>
        <div class="stat"><b>${it.Alpa}</b><div class="small">Alpa</div></div>
      </div>

      <div class="footer-actions">
        <button class="upload-btn" data-name="${encodeURIComponent(it.Nama)}">Upload Foto</button>
        <button class="remove-btn" data-name="${encodeURIComponent(it.Nama)}">Hapus Foto</button>
      </div>
    `;

    gridEl.appendChild(card);
  });

  // attach handlers
  document.querySelectorAll(".upload-btn").forEach(btn=>{
    btn.onclick = () => openFilePickerFor(decodeURIComponent(btn.getAttribute("data-name")));
  });
  document.querySelectorAll(".remove-btn").forEach(btn=>{
    btn.onclick = () => removePhotoFor(decodeURIComponent(btn.getAttribute("data-name")));
  });
}

/* RENDER CASE BOARD with color logic */
function renderCaseBoard(items){
  if (!items || items.length === 0) {
    caseBody.innerHTML = `<tr><td colspan="5" style="text-align:center;color:var(--muted);padding:18px">Tidak ada data</td></tr>`;
    return;
  }

  const sorted = [...items].sort((a,b)=> Number(a.Kasus) - Number(b.Kasus));
  let html = "";

  sorted.forEach((it, idx)=>{
    const initials = escapeHtml(it.Nama.split(" ").map(s=>s[0]||"").slice(0,2).join("").toUpperCase());
    const fotoHTML = (it.Foto && (String(it.Foto).startsWith("data:") || String(it.Foto).startsWith("http")))
      ? `<img src="${escapeHtml(it.Foto)}" class="case-photo" alt="${escapeHtml(it.Nama)}">`
      : `<div class="case-photo">${initials}</div>`;

    const kasus = Number(it.Kasus) || 0;
    const base = 2;
    const percent = Math.round((kasus / base) * 100);
    const visualPercent = Math.min(Math.max(percent, 0), 150); // cap visual 150
    const r = 16;
    const circ = 2 * Math.PI * r;
    const dash = (visualPercent / 100) * circ;

    const isDanger = kasus >= base; // if kasus >= 2 show danger
    const strokeColor = isDanger ? "url(#gradFire)" : "#1e90ff";

    // we will inline gradient only when danger
    const svgInner = isDanger
      ? `<svg width="52" height="52" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
           <defs>
             <linearGradient id="gradFire" x1="0" x2="1">
               <stop offset="0%" stop-color="${'var(--fire1)'}"/>
               <stop offset="100%" stop-color="${'var(--fire2)'}"/>
             </linearGradient>
           </defs>
           <circle cx="36" cy="36" r="${r}" stroke="rgba(255,255,255,0.06)" stroke-width="8" fill="none"></circle>
           <circle cx="36" cy="36" r="${r}" stroke="url(#gradFire)" stroke-width="8" fill="none"
             stroke-dasharray="${circ}" stroke-dashoffset="${circ - dash}" stroke-linecap="round"></circle>
         </svg>`
      : `<svg width="52" height="52" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
           <circle cx="36" cy="36" r="${r}" stroke="rgba(255,255,255,0.06)" stroke-width="8" fill="none"></circle>
           <circle cx="36" cy="36" r="${r}" stroke="#1e90ff" stroke-width="8" fill="none"
             stroke-dasharray="${circ}" stroke-dashoffset="${circ - dash}" stroke-linecap="round"></circle>
         </svg>`;

    html += `
      <tr>
        <td style="font-weight:700;color:#fff">${escapeHtml(it.Rank)}</td>
        <td>${fotoHTML}</td>
        <td>${escapeHtml(it.Nama)}</td>
        <td style="font-weight:700">${kasus}</td>
        <td style="text-align:center">
          <div class="case-circle ${isDanger ? 'fire' : ''}" title="${percent}%">
            ${svgInner}
            <div class="case-pct">${percent}%</div>
          </div>
        </td>
      </tr>
    `;
  });

  caseBody.innerHTML = html;
}

/* UPLOAD / REMOVE PHOTO HANDLING */
let pendingUploadFor = null;
function openFilePickerFor(name){
  pendingUploadFor = name;
  globalFile.value = "";
  globalFile.click();
}

globalFile.addEventListener("change", async (ev)=>{
  const f = ev.target.files && ev.target.files[0];
  if (!f) return;
  try {
    setStatus("Mengolah foto...");
    const base64 = await readFileAsDataURLAndResize(f, 1000);
    const photos = readPhotos();
    photos[pendingUploadFor] = base64;
    writePhotos(photos);
    const api = readApiCache() || [];
    const merged = mergeDataWithPhotos(api);
    renderGrid(merged);
    renderCaseBoard(merged);
    setStatus("âœ” Foto tersimpan di cache lokal.", "green");
  } catch (err) {
    console.error(err);
    setStatus("âŒ Gagal memproses foto: " + err.message, "crimson");
  } finally {
    pendingUploadFor = null;
    globalFile.value = "";
  }
});

function removePhotoFor(name){
  const photos = readPhotos();
  if (photos[name]) delete photos[name];
  writePhotos(photos);
  const api = readApiCache() || [];
  const merged = mergeDataWithPhotos(api);
  renderGrid(merged);
  renderCaseBoard(merged);
  setStatus("âœ” Foto dihapus untuk: " + name, "orange");
}

/* IMAGE RESIZE UTILITY */
function readFileAsDataURLAndResize(file, maxWidth=1200){
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onerror = ()=> reject(new Error("Gagal membaca file"));
    reader.onload = ()=>{
      const img = new Image();
      img.onerror = ()=> reject(new Error("Gagal memuat gambar"));
      img.onload = ()=>{
        const canvas = document.createElement("canvas");
        let w = img.width, h = img.height;
        if (w > maxWidth){ h = Math.round(h * (maxWidth / w)); w = maxWidth; }
        canvas.width = w; canvas.height = h;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img,0,0,w,h);
        const dataUrl = canvas.toDataURL("image/jpeg", 0.8);
        resolve(dataUrl);
      };
      img.src = reader.result;
    };
    reader.readAsDataURL(file);
  });
}

/* FETCH API */
async function fetchFromApi(){
  setStatus("memuat dari spreadsheet...");
  try {
    const res = await fetch(API_URL, { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();
    const arr = Array.isArray(data) ? data : (Array.isArray(data.data) ? data.data : []);
    if (!Array.isArray(arr)) throw new Error("format API tidak sesuai");
    writeApiCache(arr);
    setStatus("âœ” data berhasil dimuat dari spreadsheet", "green");
    return arr;
  } catch (err) {
    console.error("fetchFromApi:", err);
    setStatus("âŒ gagal memuat dari API: " + err.message, "crimson");
    throw err;
  }
}

/* CACHE HELPERS */
function readApiCache(){ try{ return JSON.parse(localStorage.getItem(LS_API_KEY)) || null; }catch(e){ return null; } }
function writeApiCache(arr){ localStorage.setItem(LS_API_KEY, JSON.stringify(arr)); }

/* INIT / MAIN */
async function loadAndRender(useCache=false){
  const cache = readApiCache();
  if (useCache && cache && Array.isArray(cache) && cache.length>0){
    const merged = mergeDataWithPhotos(cache);
    renderGrid(merged);
    renderCaseBoard(merged);
    setStatus("âœ” Menampilkan data dari cache lokal.");
    return;
  }

  try {
    const api = await fetchFromApi();
    const merged = mergeDataWithPhotos(api);
    renderGrid(merged);
    renderCaseBoard(merged);
  } catch (err) {
    const cacheFallback = readApiCache();
    if (cacheFallback && Array.isArray(cacheFallback) && cacheFallback.length>0){
      const merged = mergeDataWithPhotos(cacheFallback);
      renderGrid(merged);
      renderCaseBoard(merged);
      setStatus("âš  Tidak dapat menghubungi API. Menampilkan cache lokal.");
    } else {
      gridEl.innerHTML = `<div style="grid-column:1/-1;padding:18px;color:var(--muted);text-align:center">Gagal memuat data dan tidak ada cache lokal.</div>`;
      caseBody.innerHTML = `<tr><td colspan="5" style="text-align:center;color:var(--muted);padding:18px">Gagal memuat data</td></tr>`;
    }
  }
}

/* BUTTONS */
$("#btnReload").addEventListener("click", ()=> loadAndRender(false));
$("#btnUseCache").addEventListener("click", ()=> loadAndRender(true));
$("#btnClearCache").addEventListener("click", ()=> {
  localStorage.removeItem(LS_API_KEY);
  localStorage.removeItem(LS_PHOTO_KEY);
  gridEl.innerHTML = "";
  caseBody.innerHTML = "";
  setStatus("âœ” Cache lokal dihapus.");
});

/* START */
loadAndRender(false);
const LOGIN_USER = "Admin";
const LOGIN_PASS = "Mulya.ID";

document.getElementById("loginBtn").onclick = ()=>{
  const u = document.getElementById("loginUser").value.trim();
  const p = document.getElementById("loginPass").value.trim();

  if(u === LOGIN_USER && p === LOGIN_PASS){
    document.getElementById("login-screen").style.display = "none";
  }else{
    document.getElementById("loginError").style.display = "block";
  }
};

</script>
</body>
</html>
